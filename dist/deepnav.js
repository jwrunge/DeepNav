!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).deepnav=t()}(this,(function(){"use strict";function e(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function t(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function i(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function s(t){for(var s=1;s<arguments.length;s++){var n=null!=arguments[s]?arguments[s]:{};s%2?i(Object(n),!0).forEach((function(i){e(t,i,n[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}return function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.resizeId;this.settings=s(s({},{hoverMode:!1,alignSubmenus:"center",showContentArrows:!0,showDefaultAnimations:!0,showAestheticStyling:!0,displayMode:"responsive",breakpoint:500}),i),this.originalHoverMode=this.settings.hoverMode,this.init()}var i,n,o;return i=e,(n=[{key:"bindEvents",value:function(){for(var e=0;e<this.topLevels.length;e++)this.topLevels[e].addEventListener("mouseenter",this.hoverTopLevel.bind(this)),this.topLevels[e].addEventListener("click",this.toggleShown.bind(this));for(var t=0;t<this.subLevels.length;t++)this.subLevels[t].addEventListener("mouseenter",this.hoverSubLevel.bind(this)),this.subLevels[t].addEventListener("click",this.toggleShown.bind(this));this.navRoot.addEventListener("mouseleave",this.unhover.bind(this)),document.addEventListener("click",this.closeAll.bind(this)),this.navRoot.addEventListener("click",(function(e){e.stopPropagation()}))}},{key:"resizeScreen",value:function(){var e=this;if(this.CSSoverrider.innerHTML="#"+this.id+" .sublinks { max-height: 1000px; visibility: visible; transition: none; }","stacked"!==this.settings.displayMode)for(var t=0;t<this.topLevels.length;t++)(i=this.topSublinks[t]).style.width=i.scrollWidth+"px";if(this.CSSoverrider.innerHTML="#"+this.id+" .sublinks { transition: none; }",setTimeout((function(){e.CSSoverrider.innerHTML=""}),300),"responsive"===this.settings.displayMode?window.innerWidth<this.settings.breakpoint?(this.navRoot.classList.add("stacked"),this.settings.hoverMode=!1):(this.navRoot.classList.remove("stacked"),this.settings.hoverMode=this.originalHoverMode):"stacked"==this.settings.displayMode?this.navRoot.classList.add("stacked"):this.navRoot.classList.remove("stacked"),!this.navRoot.classList.contains("stacked"))for(t=0;t<this.topLevels.length;t++){var i=this.topSublinks[t],s=this.topLevels[t].getBoundingClientRect();if(i.style.top=s.bottom+"px","right"===this.settings.alignSubmenus)i.style.left="auto",i.style.right=window.innerWidth-s.right,i.getBoundingClientRect().left<0&&(i.style.right="auto",i.style.left=s.left+"px");else if("center"===this.settings.alignSubmenus){var n=(s.right-s.left)/2;i.style.left=s.left+n-i.clientWidth/2+"px",i.style.right="auto",i.getBoundingClientRect().left<0&&(i.style.right="auto",i.style.left=s.left+"px"),i.getBoundingClientRect().left+i.clientWidth>window.innerWidth&&(i.style.left="auto",i.style.right=window.innerWidth-s.right+"px")}else i.style.left=s.left+"px",i.style.right="auto",i.getBoundingClientRect().left+i.clientWidth>window.innerWidth&&(i.style.left="auto",i.style.right=window.innerWidth-s.right+"px")}}},{key:"hoverTopLevel",value:function(e){"all"!==this.settings.hoverMode&&"top_only"!==this.settings.hoverMode||this.open(e)}},{key:"hoverSubLevel",value:function(e){"all"===this.settings.hoverMode&&this.open(e)}},{key:"unhover",value:function(e){"all"!==this.settings.hoverMode&&"top_only"!==this.settings.hoverMode||this.close(e)}},{key:"open",value:function(e){for(var t=e.target.parentElement.querySelectorAll(".deepnav-link"),i=0;i<t.length;i++)t[i].classList.remove("nav-list-open");e.target.classList.add("nav-list-open")}},{key:"close",value:function(e){if("mouseleave"!==e.type||e.releatedTarget||e.toElement){for(var t=e.target.parentElement.querySelectorAll(".deepnav-link"),i=0;i<t.length;i++)t[i].classList.remove("nav-list-open");var s=e.target.querySelectorAll(".deepnav-link");for(i=0;i<s.length;i++)s[i].classList.remove("nav-list-open");e.target.classList.remove("nav-list-open")}}},{key:"closeAll",value:function(e){for(var t=0;t<this.navLinks.length;t++)this.navLinks[t].classList.remove("nav-list-open")}},{key:"toggleShown",value:function(e){e.target.classList.contains("nav-list-open")?this.close(e):this.open(e)}},{key:"init",value:function(){this.navRoot=document.getElementById(this.id),this.navLinks=document.getElementsByClassName("deepnav-link"),this.topLevels=document.querySelectorAll("#"+this.id+" > .deepnav-link"),this.subLevels=document.querySelectorAll("#"+this.id+" .sublinks > .deepnav-link"),this.sublinks=document.getElementsByClassName("sublinks"),this.topSublinks=document.querySelectorAll("#"+this.id+" > .sublinks"),null===document.getElementById(this.id+"DeepNavStyle")&&(this.primarystyle=document.createElement("style"),this.primarystyle.innerHTML="#"+this.id+" .sublinks { visibility: hidden; pointer-events: none; padding: 0; margin: 0; }#"+this.id+" .nav-list-open + .sublinks { visibility: visible; pointer-events: auto; }#"+this.id+" .sublinks a { display: block; }#"+this.id+" .sublinks { white-space: nowrap; }#"+this.id+":not(.stacked) > .sublinks { position: absolute; }#"+this.id+" .sublinks > .sublinks { position: relative; padding-top: 0; padding-bottom: 0; padding-right: 0; }",this.settings.showContentArrows&&(this.primarystyle.innerHTML+="#"+this.id+" .sublinks .deepnav-link:not(.nav-list-open)::after { padding-left: .5em; content: '▾'; }#"+this.id+" .sublinks .deepnav-link.nav-list-open::after { padding-left: .5em; content: '▴'; }"),this.settings.showDefaultAnimations&&(this.primarystyle.innerHTML+="#"+this.id+" .sublinks { visibility: visible; max-height: 0; transition: max-height .5s cubic-bezier(0, 1, 0, 1), padding .5s, margin .5s, border-width 1s; overflow: hidden; }#"+this.id+" .nav-list-open + .sublinks { max-height: 1000px; transition: max-height 1s ease-in-out; }"),this.settings.showAestheticStyling&&(this.primarystyle.innerHTML+="#"+this.id+" { white-space: nowrap; background-color: #DFDCE3; padding: .5em; }#"+this.id+" > a { margin: .5rem; padding: .5rem; }#"+this.id+" > a:hover { background-color: #F7B733; }#"+this.id+" a:hover { color: white; cursor: pointer; }#"+this.id+" > .deepnav-link { margin: 0 .5em; }#"+this.id+" > .sublinks { background-color: white; }#"+this.id+" > .deepnav-link:not(.nav-list-open) + .sublinks { border-width: 0; }#"+this.id+" > .sublinks { border-style: solid; border-width: 2px; border-top-style: none; border-color: #DFDCE3; }#"+this.id+" > .sublinks a { padding: .5em; }#"+this.id+" .sublinks > .sublinks { padding-left: 1em; border-left-style: solid; border-left-width: 2px; border-color: #dfdce3; background: none; }#"+this.id+" .sublinks > .sublinks a { padding-left: 1em; }#"+this.id+" .sublinks a:hover { color: white; background-color: #F7B733; }#"+this.id+" > .nav-list-open { background-color: #F7B733; color: white; }",this.primarystyle.innerHTML+="#"+this.id+".stacked { max-width: 15em; }#"+this.id+".stacked > .sublinks { margin-left: 1em; border: none; }#"+this.id+".stacked > .sublinks > .sublinks { border-left-style: none; }#"+this.id+".stacked > .deepnav-link { padding: .25em; margin-left: 1em; line-height: 150%; }",this.primarystyle.id=this.id+"DeepNavStyle"),document.head.insertAdjacentElement("afterbegin",this.primarystyle),this.CSSoverrider=document.createElement("style"),this.CSSoverrider.id=this.id+"Override",document.head.appendChild(this.CSSoverrider));var e=this;window.addEventListener("resize",(function(){clearTimeout(e.resizeId),e.resizeId=setTimeout(e.resizeScreen.bind(e),500)})),this.bindEvents(),this.resizeScreen()}}])&&t(i.prototype,n),o&&t(i,o),e}()}));
//# sourceMappingURL=deepnav.js.map
